let yk_mt_chart_font=yk_mt_chart.chartFont,yk_mt_chart_color=yk_mt_chart.chartColor;var yk_mt_chart_config=!1,yk_mt_ctx=!1,yk_mt_chart=!1,yk_mt_chart_is_admin="undefined"!=typeof yk_mt_sc_meal_tracker&&"1"===yk_mt_sc_meal_tracker["is-admin"];Chart.pluginService.register({beforeDraw:function(a){if(a.config.options.elements.center){var b=a.chart.ctx,c=a.config.options.elements.center,d=c.fontStyle||"Arial",e=c.text,f=c.color||"#000",g=c.sidePadding||20,h=g/100*(2*a.innerRadius);let p=jQuery(window).width(),q=30;460>p?q=15:540>p&&(q=20),b.font=q+"px "+d;var i=b.measureText(e).width,j=2*a.innerRadius-h,k=Math.floor(30*(j/i)),l=2*a.innerRadius,m=Math.min(k,l);b.textAlign="center",b.textBaseline="middle";var n=(a.chartArea.left+a.chartArea.right)/2,o=(a.chartArea.top+a.chartArea.bottom)/2;b.font=m+"px "+d,b.fillStyle=f,b.fillText(e,n,o)}}});function yk_mt_chart_data_set(a,b,c,d,e){yk_mt_chart_config={calories_allowed:a,calories_remaining:b,calories_used:c,percentage_used:d,chart_title:e}}function yk_mt_chart_render(){if(yk_mt_ctx&&yk_mt_chart)yk_mt_chart.data=yk_mt_chart_data(),yk_mt_chart.options=yk_mt_chart_options({}),yk_mt_chart.update();else{yk_mt_ctx=jQuery("#yk-mt-chart");let a=!("1"!==yk_mt_ctx.attr("data-responsive"));yk_mt_chart=new Chart(yk_mt_ctx,{type:"doughnut",data:yk_mt_chart_data(),options:yk_mt_chart_options(a)})}}function yk_mt_chart_data(){return{datasets:[{data:[yk_mt_chart_config.calories_used,yk_mt_chart_config.calories_remaining],backgroundColor:[yk_mt_chart_color,"#e5e5e5"],borderWidth:0}],labels:[yk_mt_chart_config.calories_used+" "+yk_mt_sc_meal_tracker.localise["chart-label-used"],yk_mt_chart_config.calories_remaining+" "+yk_mt_sc_meal_tracker.localise["chart-label-remaining"]]}}function yk_mt_chart_options(a){let b={cutoutPercentage:88,title:{display:!yk_mt_chart_is_admin,fontFamily:yk_mt_chart_font,fontSize:16,fontStyle:"normal",padding:20,text:yk_mt_chart_config.chart_title,fontColor:"#000000"},legend:{display:!yk_mt_chart_is_admin,position:"right",labels:{fontFamily:yk_mt_chart_font,fontSize:16,boxWidth:16,fontColor:"#000000"}}};return!1===yk_mt_chart_is_admin&&(b.elements={center:{text:yk_mt_chart_config.percentage_used+"%",color:yk_mt_chart_color,fontStyle:yk_mt_chart_font,sidePadding:125}}),!0===a&&(b.elements=!0,b.maintainAspectRatio=!1),b}jQuery(document).ready(function(a){a(".yk-mt-line-chart").each(function(){let b=a(this).attr("id"),c=a("#"+b),d=window[b+"_data"],e=new Chart(c,{type:d.type,data:{labels:d.labels,datasets:d.data},options:d.options})})});
